/**
 * $Id: [project name].js [yyyy-mm-dd] $
 *
 * @author [Developer Name]
 * @copyright Copyright (c) [yyyy], Trapeze, All rights reserved.
 *
 * Requirements:
 *      jQuery 1.3.1        (http://www.jquery.com),
 *      sIFR 3-r436         (http://dev.novemberborn.net/sifr3/nightlies/)
 */


if (typeof trapeze == "undefined") var trapeze = new Object();

trapeze.[project name] = {	
    preload_images : function() {
    //Preload Function
        var a = (typeof arguments[0] == 'object')? arguments[0] : arguments;
        for(var i = a.length -1; i > 0; i--) {
            $("<img />").attr("src", a[i]);
        }
    },

    rgb_to_hex : function(rgb) {
    // Convert an rgb color format to hex color equivalent
    // for example: this.rgb_to_hex('192,192,192') will return 'C0C0C0'

        if (rgb.length > 0) {
            var char = "0123456789ABCDEF";
            var a_code = rgb.split(",");
            var str_hex = '';

            for(var i=0; i<a_code.length; i++) {
                str_hex += String(char.charAt(Math.floor(a_code[i] / 16))) + String(char.charAt(a_code[i] - (Math.floor(a_code[i] / 16) * 16)));
            }
            return str_hex;
        } else {
            return '';
        }
    },

    get_sIFR_style_for : function(obj) {
    // Collect all the styles for a specific selector

        var style = '';

        $(obj).find('span').andSelf().each(function(i){
            var is_obj = ($(this)[0] == $(obj)[0]);
            if ((! is_obj) && ($(this).attr('class') == '')) { return false };

            var span_class      = '.' + $.trim($(this).attr('class')).replace(new RegExp(' ', 'g'), '.');
            var span_selector   = obj_selector + (is_obj ? '' : ' ' + span_class);
            var _color          = "#" + trapeze.[project name].rgb_to_hex(($(span_selector).css('color')).slice(4,-1));
            var _font_size      = $(span_selector).css('font-size');
            var _font_weight    = $(span_selector).css('font-weight');
            if (! isNaN(_font_weight)) { _font_weight = Number(_font_weight)<=400 ? 'normal' : 'bold'; }
            _text_align     = $(span_selector).css('text-align');
            
            style += (style!="" ? ", " : "") + "'" + (is_obj ? '.sIFR-root' : '.' + $.trim($(this).attr('class')).split(' ')[0]) + " { color:" + _color + "; font-size:" + _font_size + "; font-weight:" + _font_weight + "; text-align:" + _text_align + ";}'";
        });

        return style;
    },

    config_sIFR : function() {
    // Configure sIFR on the current page

        $('h1').add('h2').each(function(){ // Use the jQuery add function to add selectors
            var self = this;
            var selector = $(this)[0].tagName+(($(this).attr('class')=='') ? '' : '.'+$.trim($(this).attr('class')).replace(new RegExp(' ', 'g'), '.'));

            if (selector.indexOf('sIFR') < 0){
                var style = self.get_sIFR_style_for($(this), selector);
                var css_style = eval("[" + style + ", 'em { font-style: italic; }', 'strong { font-weight: bold; }'" + "]");
                sIFR.replace([font_name], {
                    selector: selector,
                    css: css_style,
                    wmode: 'transparent'
                });
            }
        });
    },

    // *** Place your functions here ****

    init : function() {
        var page = $('body').attr('class');
        page = (page.indexOf(' ') > 0) ? page.slice(0,page.indexOf(' ')) : page;
        switch(page) {
            case 'home-page':
                //Code to be executed on the home page
                break;
            case 'about-page':
                //Code to be executed on the about page
                break;
            default:
                //Code to be executed on any page, but the pages listed above.
        }

        // Code to be executed on every page
    }
};

$(function() {
   // Code to execute when the DOM is ready

    trapeze.[project name].init();
});


// sIFR Configuration
var [font name] = { src: trapeze.[project name].media_path+'flash/[font file].swf'};
sIFR.activate([font name]);

$(function() {
    trapeze.[project name].config_sIFR();
});
